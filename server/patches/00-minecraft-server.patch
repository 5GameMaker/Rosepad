java/net/minecraft/server/MinecraftServer.java
41 - public static HashMap playerList;
41 + public static HashMap<String, Object> playerList;
75 - MinecraftServer.logger.info("Starting minecraft server version 0.2.1");
75 + MinecraftServer.logger.info("Starting minecraft server version Rosepad 1.1");
83 - this.onlineMode = this.propertyManagerObj.getBooleanProperty("online-mode", true);
83 + this.onlineMode = false;
99 - if (!this.onlineMode) {
99 - MinecraftServer.logger.warning("**** SERVER IS RUNNING IN OFFLINE/INSECURE MODE!");
99 - MinecraftServer.logger.warning("The server will make no attempt to authenticate usernames. Beware.");
99 - MinecraftServer.logger.warning("While this makes the game possible to play without internet access, it also opens up the ability for hackers to connect with any username they choose.");
99 - MinecraftServer.logger.warning("To change this, set \"online-mode\" to \"true\" in the server.settings file.");
99 - }
441 + iCommandListener3.addHelpCommandMessage("   whitelist                 manage server whitelist");
416 +                 else if (string2.toLowerCase().startsWith("whitelist")) {
417 +                     final String[] args = string2.substring(Math.min("whitelist".length() + 1, string2.length() - 1)).split(" ");
418 +                     if (args.length == 0) {
419 +                         iCommandListener3.addHelpCommandMessage("Whitelist subcommands:");
420 +                         iCommandListener3.addHelpCommandMessage("   enable              enable whitelist");
421 +                         iCommandListener3.addHelpCommandMessage("   disable             disable whitelist");
422 +                         iCommandListener3.addHelpCommandMessage("   add <player>        add player to whitelist");
423 +                         iCommandListener3.addHelpCommandMessage("   remove <player>     remove player from whitelist");
424 +                         iCommandListener3.addHelpCommandMessage("   add-ip <ip>         add IP to whitelist");
425 +                         iCommandListener3.addHelpCommandMessage("   remove-ip <ip>      remove IP from whitelist");
426 +                     }
427 +                     else if (args[0].equalsIgnoreCase("enable")) {
428 +                         this.configManager.enableWhitelist();
429 +                         this.print(string3, "Whitelist enabled");
430 +                     }
431 +                     else if (args[0].equalsIgnoreCase("disable")) {
432 +                         this.configManager.disableWhitelist();
433 +                         this.print(string3, "Whitelist disabled");
434 +                     }
435 +                     else if (args[0].equalsIgnoreCase("add") && args.length > 1) {
436 +                         StringBuilder username = new StringBuilder();
437 +                         for (int i = 1; i < args.length; i++) {
438 +                             if (i != 1) username.append(" ");
439 +                             username.append(args[i]);
440 +                         }
441 +                         this.print(string3, "Added player \"" + username.toString()
442 +                                 .replaceAll("\\\\", "\\\\")
443 +                                 .replaceAll("\\\\\"", "\\\"") + "\" to whitelist");
444 +                         this.configManager.whitelistPlayer(username.toString().toLowerCase());
445 +                     }
446 +                     else if (args[0].equalsIgnoreCase("remove") && args.length > 1) {
447 +                         StringBuilder username = new StringBuilder();
448 +                         for (int i = 1; i < args.length; i++) {
449 +                             if (i != 1) username.append(" ");
450 +                             username.append(args[i]);
451 +                         }
452 +                         this.print(string3, "Remove player \"" + username.toString()
453 +                                 .replaceAll("\\\\", "\\\\")
454 +                                 .replaceAll("\\\\\"", "\\\"") + "\" from whitelist");
455 +                         this.configManager.unwhitelistPlayer(username.toString().toLowerCase());
456 +                     }
457 +                     else if (args[0].equalsIgnoreCase("add-ip") && args.length > 1) {
458 +                         StringBuilder username = new StringBuilder();
459 +                         for (int i = 1; i < args.length; i++) {
460 +                             if (i != 1) username.append(" ");
461 +                             username.append(args[i]);
462 +                         }
463 +                         this.print(string3, "Added IP \"" + username.toString()
464 +                                 .replaceAll("\\\\", "\\\\")
465 +                                 .replaceAll("\\\\\"", "\\\"") + "\" to whitelist");
466 +                         this.configManager.whitelistIP(username.toString().toLowerCase());
467 +                     }
468 +                     else if (args[0].equalsIgnoreCase("remove-ip") && args.length > 1) {
469 +                         StringBuilder username = new StringBuilder();
470 +                         for (int i = 1; i < args.length; i++) {
471 +                             if (i != 1) username.append(" ");
472 +                             username.append(args[i]);
473 +                         }
474 +                         this.print(string3, "Remove IP \"" + username.toString()
475 +                                 .replaceAll("\\\\", "\\\\")
476 +                                 .replaceAll("\\\\\"", "\\\"") + "\" from whitelist");
477 +                         this.configManager.unwhitelistIP(username.toString().toLowerCase());
478 +                     }
479 +                     else {
480 +                         iCommandListener3.addHelpCommandMessage("Whitelist subcommands:");
481 +                         iCommandListener3.addHelpCommandMessage("   enable              enable whitelist");
482 +                         iCommandListener3.addHelpCommandMessage("   disable             disable whitelist");
483 +                         iCommandListener3.addHelpCommandMessage("   add <player>        add player to whitelist");
484 +                         iCommandListener3.addHelpCommandMessage("   remove <player>     remove player from whitelist");
485 +                         iCommandListener3.addHelpCommandMessage("   add-ip <player>     add IP to whitelist");
486 +                         iCommandListener3.addHelpCommandMessage("   remove-ip <player>  remove IP from whitelist");
487 +                     }
488 +                 }

